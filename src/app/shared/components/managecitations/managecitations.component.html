<ng-template #manageCitations let-c="close" let-d="dismiss">

	<div class="modal-header">
		<div class="title">Manage Citations</div>  
		<button (click)="d('closed')">&times;</button>                
	</div>

    <div class="modal-body modal-body-fixed">
		<!-- Search Input -->
		<div>
			<input type="text" #input placeholder="Search" (keyup)="filter(input.value)">
		</div>
		
		<!-- Manage Citation Table -->
		<table class="custom-table table-striped table-scroll mtop-sm">
			<thead>
				<tr>
					<th class="width-60">Citation</th>
					<th class="width-35">Associated Regression Regions</th>
					<th class="width-5"></th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let l of filteredData">
					<!-- Col 1, Citation -->
					<td class="width-60">
						<a [href]="l.citationURL" [target]="_blank" class="cell-citation">
							{{l.author}}
							<small>{{l.title}}</small>
						</a>
					</td>
					<!-- Col 2, Associated Regression Region -->
					<td class="width-35">
						<div *ngFor="let e of l.regressionRegions; let eIndex = index" class="cell-block">
							{{e.name}}
						</div>
					</td>
					<!-- Col 3 - Buttons -->
					<td class="width-5">
						<div class="cell-buttons">
							<button [class.hidden]="!showAddCitations" class="icon-button hover-red" (click)="!l.regressionRegions?.length>0 && deleteCitation(l.id)" [disabled]="l.regressionRegions?.length>0" aria-label="Delete Citation">
								<i class="fas fa-times"></i>
							</button>
							<button [class.hidden]="showAddCitations" class="icon-button hover-blue" (click)="addExistingCitation(l); d('closed')" aria-label="Add Citation"> 
								<i class="fas fa-plus"></i>
							</button>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
    </div>
    <div class="modal-footer">
        <button type="button" (click)="d('closed')" class="button black">Close</button>
    </div>
</ng-template>